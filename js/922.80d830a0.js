"use strict";(self["webpackChunkhex_vue_project_week7"]=self["webpackChunkhex_vue_project_week7"]||[]).push([[922],{3485:function(t,d,i){i.r(d),i.d(d,{default:function(){return O}});var a=i(3396),s=i(7139),e=i(9242);const o={class:"container"},l=(0,a._)("h3",{class:"h3 text-center mt-4"},"產品列表",-1),n={class:"table align-middle"},r=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"圖片"),(0,a._)("th",null,"商品名稱"),(0,a._)("th",null,"價格"),(0,a._)("th")])],-1),c={style:{width:"200px"}},u={key:0,class:"h5"},p={key:1},h={class:"h6"},g={class:"h5"},_={class:"btn-group btn-group-sm"},m=["onClick","disabled"],b=["onClick","disabled"],y={class:"fas fa-spinner fa-pulse"},v=(0,a.Uk)(" 加到購物車 ");function w(t,d,i,w,k,f){const M=(0,a.up)("Loading"),x=(0,a.up)("UserProduct"),C=(0,a.up)("Pagination");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(M,{"is-ready":k.isReady},null,8,["is-ready"]),(0,a._)("div",o,[(0,a.Wm)(x,{id:k.productId,ref:"userProductModal",onAddToCart:f.addToCart},null,8,["id","onAddToCart"]),l,(0,a._)("table",n,[r,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.products,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id},[(0,a._)("td",c,[(0,a._)("div",{style:(0,s.j5)([{backgroundImage:`url(${t.imageUrl})`},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),(0,a._)("td",null,(0,s.zw)(t.title),1),(0,a._)("td",null,[t.price===t.origin_price?((0,a.wg)(),(0,a.iD)("div",u,(0,s.zw)(t.price)+" 元 ",1)):((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("del",h,"原價 "+(0,s.zw)(t.origin_price)+" 元",1),(0,a._)("div",g,"現在只要 "+(0,s.zw)(t.price)+" 元",1)]))]),(0,a._)("td",null,[(0,a._)("div",_,[(0,a._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:d=>f.openProductModal(t.id),disabled:k.isLoading===t.id}," 查看更多 ",8,m),(0,a._)("button",{type:"button",class:"btn btn-outline-danger",onClick:d=>f.addToCart(t.id),disabled:k.isLoading===t.id},[(0,a.wy)((0,a._)("i",y,null,512),[[e.F8,k.isLoading===t.id]]),v],8,b)])])])))),128))])]),(0,a.Wm)(C,{pages:k.pagination,onEmitPages:f.getProducts},null,8,["pages","onEmitPages"])])],64)}const k={class:"container"},f={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},M={class:"modal-dialog modal-xl",role:"document"},x={class:"modal-content border-0"},C={class:"modal-header bg-dark text-white"},P={class:"modal-title",id:"exampleModalLabel"},z=(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),$={class:"modal-body"},L={class:"row"},D={class:"col-sm-6"},T=["src","alt"],R={class:"col-sm-6"},U={class:"badge bg-primary rounded-pill"},q={key:0,class:"h5"},j={key:1},I={class:"h6"},Z={class:"h5"},H={class:"input-group"},S=["value"];function W(t,d,i,o,l,n){return(0,a.wg)(),(0,a.iD)("div",k,[(0,a._)("div",f,[(0,a._)("div",M,[(0,a._)("div",x,[(0,a._)("div",C,[(0,a._)("h5",P,[(0,a._)("span",null,(0,s.zw)(l.product.title),1)]),z]),(0,a._)("div",$,[(0,a._)("div",L,[(0,a._)("div",D,[(0,a._)("img",{class:"img-fluid",src:l.product.imageUrl,alt:l.product.title},null,8,T)]),(0,a._)("div",R,[(0,a._)("span",U,(0,s.zw)(l.product.category),1),(0,a._)("p",null,"商品描述："+(0,s.zw)(l.product.description),1),(0,a._)("p",null,"商品內容："+(0,s.zw)(l.product.content),1),l.product.origin_price===l.product.price?((0,a.wg)(),(0,a.iD)("div",q,(0,s.zw)(l.product.price)+" 元 ",1)):((0,a.wg)(),(0,a.iD)("div",j,[(0,a._)("del",I,"原價 "+(0,s.zw)(l.product.origin_price)+" 元",1),(0,a._)("div",Z,"現在只要 "+(0,s.zw)(l.product.price)+" 元",1)])),(0,a._)("div",null,[(0,a._)("div",H,[(0,a.wy)((0,a._)("select",{id:"itemNum",class:"form-select","onUpdate:modelValue":d[0]||(d[0]=t=>l.qty=t),min:"1"},[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(20,(t=>(0,a._)("option",{value:t,key:`${t}`},(0,s.zw)(t),9,S))),64))],512),[[e.bM,l.qty]]),(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:d[1]||(d[1]=(...t)=>n.addToCart&&n.addToCart(...t))}," 加入購物車 ")])])])])])])])],512)])}var Y=i(7972),A=i.n(Y),E={props:["id"],data(){return{productModal:"",product:{},qty:1}},watch:{id(){this.getProduct()}},methods:{getProduct(){const t=`https://vue3-course-api.hexschool.io/v2/api/hyxfish27/product/${this.id}`;this.$http.get(t).then((t=>{this.product=t.data.product})).catch((t=>{alert(t.data.message)}))},addToCart(){this.$emit("add-to-cart",this.product.id,this.qty),this.closeModal()},openModal(){this.productModal.show()},closeModal(){this.productModal.hide()}},mounted(){this.productModal=new(A())(this.$refs.modal)}},K=i(89);const F=(0,K.Z)(E,[["render",W]]);var N=F,V=i(535),B=i(7738),G={data(){return{products:[],pagination:{},productId:"",isLoading:"",isReady:!1}},components:{UserProduct:N,Pagination:V.Z,Loading:B.Z},inject:["emitter"],methods:{getProducts(t=1){this.isReady=!1;const d=`https://vue3-course-api.hexschool.io/v2/api/hyxfish27/products?page=${t}`;this.$http.get(d).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,this.isReady=!0})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息")}))},addToCart(t,d=1){this.isReady=!1;const i="https://vue3-course-api.hexschool.io/v2/api/hyxfish27/cart";this.isLoading=t;const a={product_id:t,qty:d};this.$http.post(i,{data:a}).then((t=>{this.$httpMessageState(t,"加入購物車"),this.isLoading="",this.isReady=!0})).catch((t=>{this.$httpMessageState(t.response,"加入購物車"),this.isReady=!0}))},openProductModal(t){this.productId=t,this.$refs.userProductModal.openModal()}},mounted(){this.getProducts()}};const J=(0,K.Z)(G,[["render",w]]);var O=J}}]);
//# sourceMappingURL=922.80d830a0.js.map